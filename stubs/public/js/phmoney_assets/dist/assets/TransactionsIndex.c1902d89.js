import{_ as $,r as l,o as r,g as i,a as e,b as a,w as u,F as b,m as w,t as c,c as y,i as p,d as D}from"./main.e98d045c.js";const N={async created(){this.$route.params.account_pk!==this.store.transactions_filter.account_pk?this.clear():await this.load(0)},methods:{clear(){this.store.transactions_filter={account_pk:this.$route.params.account_pk,page:1,memo:null,description:null,num:null,date_start:null,date_end:null},this.load(0)},async load(o){o>0&&(this.store.transactions_filter.page=o),await this.store.get(`/phmoney/transactions/${this.$route.params.account_pk}`,this.store.transactions_filter)},async destroy(o){confirm("Are you sure you want to delete this item?")&&(await this.store.delete(`/phmoney/transactions/${this.store.props.account.pk}/destroy/${o.transaction.pk}`),this.load(this.store.transactions_filter.page))},async duplicate(o){await this.store.get(`/phmoney/transactions/${this.store.props.account.pk}/duplicate/${o.transaction.pk}`),await this.load(0)}}},B={key:0,class:"p-6 overflow-x-auto"},L={class:"flex gap-2"},U={class:"flex gap-2 pt-2"},F=e("span",{class:"material-icons-outlined"}," search ",-1),P=e("span",{class:"material-icons-outlined"}," search_off ",-1),S={key:0,class:"table-fixed"},T=e("th",null,"Date",-1),A=e("th",null,"Num",-1),E=e("th",null,"Description",-1),R=e("th",null,"Account",-1),I=e("th",null,"R",-1),M=e("th",null,"Debit",-1),j=e("th",null,"Credit",-1),q=e("th",null,"Balance",-1),z=e("span",{class:"material-icons-outlined"},"add",-1),G=["split"],H=["title"],J=["title"],K=["title"],O={key:1},Q={class:"flex"},W=["onClick"],X=e("span",{class:"material-icons-outlined"},"copy",-1),Y=[X],Z=e("span",{class:"material-icons-outlined"},"edit",-1),x=["onClick"],tt=e("span",{class:"material-icons-outlined"},"delete",-1),et=[tt];function ot(o,n,k,_,st,s){const h=l("form-label"),d=l("form-input"),f=l("form-button"),v=l("form-secondary-button"),m=l("amount-financial"),g=l("RouterLink"),C=l("Pagination");return o.store.props.splits!==void 0?(r(),i("div",B,[e("div",L,[e("div",null,[a(h,{for:"date_start",value:"Start Date"}),a(d,{type:"date",id:"date_start",name:"date_start",modelValue:o.store.transactions_filter.date_start,"onUpdate:modelValue":n[0]||(n[0]=t=>o.store.transactions_filter.date_start=t),onChange:n[1]||(n[1]=t=>s.load(1))},null,8,["modelValue"])]),e("div",null,[a(h,{for:"date_end",value:"End Date"}),a(d,{type:"date",id:"date_end",name:"date_end",modelValue:o.store.transactions_filter.date_end,"onUpdate:modelValue":n[2]||(n[2]=t=>o.store.transactions_filter.date_end=t),onChange:n[3]||(n[3]=t=>s.load(1))},null,8,["modelValue"])])]),e("div",U,[a(d,{id:"memo",name:"memo",type:"text",modelValue:o.store.transactions_filter.memo,"onUpdate:modelValue":n[4]||(n[4]=t=>o.store.transactions_filter.memo=t),placeholder:"Memo...",onChange:n[5]||(n[5]=t=>s.load(1))},null,8,["modelValue"]),a(d,{id:"description",name:"description",type:"text",modelValue:o.store.transactions_filter.description,"onUpdate:modelValue":n[6]||(n[6]=t=>o.store.transactions_filter.description=t),placeholder:"Description...",onChange:n[7]||(n[7]=t=>s.load(1))},null,8,["modelValue"]),a(d,{id:"num",name:"num",type:"text",modelValue:o.store.transactions_filter.num,"onUpdate:modelValue":n[8]||(n[8]=t=>o.store.transactions_filter.num=t),placeholder:"Num...",onChange:n[9]||(n[9]=t=>s.load(1))},null,8,["modelValue"]),a(f,{title:"Search",onClick:n[10]||(n[10]=t=>s.load(1))},{default:u(()=>[F]),_:1}),a(v,{title:"Clear",onClick:s.clear},{default:u(()=>[P]),_:1},8,["onClick"])]),o.store.processing?p("",!0):(r(),i("table",S,[e("thead",null,[e("tr",null,[T,A,E,R,I,M,j,q,e("th",null,[a(f,{onClick:n[11]||(n[11]=t=>o.$router.push({name:"transactions.create",params:{account_pk:o.store.props.account.pk}})),title:"Add New"},{default:u(()=>[z]),_:1})])])]),e("tbody",null,[(r(!0),i(b,null,w(o.store.props.splits.data,t=>(r(),i("tr",{key:t.id,split:t,class:"hover:bg-sky-50"},[e("td",null,c(t.transaction.post_date),1),e("td",{class:"truncate",title:t.transaction.num},c(t.transaction.num),9,H),e("td",{class:"truncate",title:t.transaction.description},c(t.transaction.description),9,J),t.transaction.splits.length==1?(r(),i("td",{key:0,class:"truncate",title:t.transaction.splits[0].account.name},c(t.transaction.splits[0].account.name),9,K)):(r(),i("td",O,"-- Split Transaction --")),e("td",null,c(t.reconcile_state),1),e("td",null,[a(m,{amount:t.debit,commodity:t.account.commodity},null,8,["amount","commodity"])]),e("td",null,[a(m,{amount:t.credit,commodity:t.account.commodity},null,8,["amount","commodity"])]),e("td",null,[a(m,{amount:t.balance,commodity:t.account.commodity},null,8,["amount","commodity"])]),e("td",null,[e("div",Q,[e("div",{class:"text-yellow-500 hover:text-yellow-300 hover:cursor-pointer",onClick:V=>s.duplicate(t),title:"Duplicate"},Y,8,W),a(g,{class:"text-sky-500 hover:text-sky-300",to:{name:"transactions.edit",params:{account_pk:o.store.props.account.pk,transaction_pk:t.transaction.pk}},title:"Edit"},{default:u(()=>[Z]),_:2},1032,["to"]),e("div",{class:"text-red-500 hover:text-red-300 hover:cursor-pointer",onClick:V=>s.destroy(t),title:"Delete"},et,8,x)])])],8,G))),128))]),e("tfoot",null,[o.store.props.splits.total>o.store.props.splits.per_page?(r(),y(C,{key:0,current:o.store.props.splits.current_page,total:o.store.props.splits.total,"per-page":o.store.props.splits.per_page,onPageChanged:s.load},null,8,["current","total","per-page","onPageChanged"])):p("",!0)])]))])):p("",!0)}var nt=$(N,[["render",ot]]);const at={class:"bg-white shadow mt-4 prose max-w-none"},rt=D({name:"TransactionsIndex",setup(o){return(n,k)=>{const _=l("FormLayout");return r(),y(_,{title:`Transactions - ${n.store.props.account?n.store.props.account.name:"..."}`},{default:u(()=>[e("div",at,[a(nt)])]),_:1},8,["title"])}}});export{rt as default};
